# Next.js App Router 렌더링 플로우 가이드

## 개요

Next.js App Router는 URL 요청부터 최종 렌더링까지 계층적 구조로 처리됩니다. 각 단계는 특정 역할을 수행하며, 이를 통해 체계적인 페이지 구성이 이루어집니다.

## 상세 렌더링 단계 설명

### 1. 루트 레이아웃 처리 (`app/layout.tsx`)

- 모든 페이지의 최상위 레이아웃을 담당
- HTML의 `lang` 속성을 현재 로케일에 맞게 설정
- DaisyUI 테마 설정 (`data-theme` 속성 관리)
- 전역 스타일시트 적용 (`globals.css`, `fonts.css`)
- 기본 메타데이터 설정 (`title`, `description`)

### 2. 로케일 레이아웃 처리 (`app/[locale]/layout.tsx`)

- URL의 로케일 파라미터를 기반으로 언어 설정
- 해당 언어의 번역 사전(dictionary) 로드
- 하위 컴포넌트들에 번역 컨텍스트 제공

### 3. 페이지 컴포넌트 처리 (`app/[locale]/page.tsx`)

- 실제 페이지 콘텐츠 렌더링
- View 컴포넌트를 통한 비즈니스 로직 처리
- UI 컴포넌트들의 조합 및 데이터 전달

### 4. 컴포넌트 계층 구조

#### View 컴포넌트 (`components/view/`)

- 페이지별 로직 처리
- 데이터 페칭 및 상태 관리
- UI 컴포넌트 구성

#### UI 컴포넌트 (`components/ui/`)

- 순수 표현 컴포넌트
- 재사용 가능한 디자인 요소
- 비즈니스 로직 독립적 구현

## 시각적 렌더링 플로우

### 기본 요청 처리 흐름

```ascii
    ┌─────────────────┐
    │   Browser URL   │
    │    Request      │
    └────────┬────────┘
             │
    ┌────────▼────────┐
    │  Root Layout    │
    │  Theme & i18n   │
    └────────┬────────┘
             │
    ┌────────▼────────┐
    │ Locale Layout   │
    │  Translation    │
    └────────┬────────┘
             │
    ┌────────▼────────┐
    │     Page        │
    │  Components     │
    └─────────────────┘
```

### 로케일 처리 구조

```ascii
    ┌───────────────────────┐
    │     Locale Layout     │
    │                       │
    │  ┌─────────────────┐  │
    │  │    Messages     │  │
    │  │   Dictionary    │  │
    │  └─────────────────┘  │
    └───────────────────────┘
```

### 컴포넌트 렌더링 구조

```ascii
    ┌─────────────────────────┐
    │      Page Component     │
    │                         │
    │    ┌───────────────┐    │
    │    │  View Comp    │    │
    │    └───────┬───────┘    │
    │            │            │
    │    ┌───────▼───────┐    │
    │    │    UI Comp    │    │
    │    └───────────────┘    │
    └─────────────────────────┘
```

### 데이터 흐름

```ascii
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│     View     │ => │   UI Props   │ => │     UI      │
│  Component   │    │   Transfer   │    │  Component   │
└──────────────┘    └──────────────┘    └──────────────┘
```

### 실제 URL 요청 예시 (`/ko` 접근 시)

```ascii
URL: /ko
│
├─► app/layout.tsx
│   └─► Theme & Global
│
├─► app/[locale]/layout.tsx
│   └─► Korean Dict
│
└─► app/[locale]/page.tsx
    └─► Page Content
```
